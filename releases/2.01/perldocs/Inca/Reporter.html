<html><head><title>Inca::Reporter</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="black with blue on white" type="text/css" href="../_black_with_blue_on_white.css" media="all" >
<link rel="alternate stylesheet" title="black with magenta on white" type="text/css" href="../_black_with_magenta_on_white.css" media="all" >
<link rel="alternate stylesheet" title="black with cyan on white" type="text/css" href="../_black_with_cyan_on_white.css" media="all" >
<link rel="alternate stylesheet" title="white with purple on black" type="text/css" href="../_white_with_purple_on_black.css" media="all" >
<link rel="alternate stylesheet" title="white with navy blue on black" type="text/css" href="../_white_with_navy_blue_on_black.css" media="all" >
<link rel="alternate stylesheet" title="grey with green on black" type="text/css" href="../_grey_with_green_on_black.css" media="all" >
<link rel="alternate stylesheet" title="white with green on grey" type="text/css" href="../_white_with_green_on_grey.css" media="all" >
<link rel="alternate stylesheet" title="black with green on grey" type="text/css" href="../_black_with_green_on_grey.css" media="all" >
<link rel="alternate stylesheet" title="grey with green on white" type="text/css" href="../_grey_with_green_on_white.css" media="all" >
<link rel="alternate stylesheet" title="indexless black with blue on white" type="text/css" href="../_indexless_black_with_blue_on_white.css" media="all" >
<link rel="alternate stylesheet" title="indexless white with purple on black" type="text/css" href="../_indexless_white_with_purple_on_black.css" media="all" >
<link rel="alternate stylesheet" title="indexless white with green on grey" type="text/css" href="../_indexless_white_with_green_on_grey.css" media="all" >
<link rel="alternate stylesheet" title="indexless grey with green on white" type="text/css" href="../_indexless_grey_with_green_on_white.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.008005 at Sat Mar 24 22:17:15 2007 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CLASS_METHODS'>CLASS METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new(%25attributes)'>new(%attributes)</a>
    <li class='indexItem indexItem2'><a href='#addArg(%24name%2C_%24description%2C_%24default%2C_%24pattern)'>addArg($name, $description, $default, $pattern)</a>
    <li class='indexItem indexItem2'><a href='#addDependency(%24dependency_%5B%2C_...%5D)'>addDependency($dependency [, ...])</a>
    <li class='indexItem indexItem2'><a href='#argValue(%24name%2C_%24position)'>argValue($name, $position)</a>
    <li class='indexItem indexItem2'><a href='#argValues(%24name)'>argValues($name)</a>
    <li class='indexItem indexItem2'><a href='#compiledProgramOutput(%25params)'>compiledProgramOutput(%params)</a>
    <li class='indexItem indexItem2'><a href='#failPrintAndExit(%24msg)'>failPrintAndExit($msg)</a>
    <li class='indexItem indexItem2'><a href='#getBody(_)'>getBody( )</a>
    <li class='indexItem indexItem2'><a href='#getCompleted(_)'>getCompleted( )</a>
    <li class='indexItem indexItem2'><a href='#getDescription(_)'>getDescription( )</a>
    <li class='indexItem indexItem2'><a href='#getFailMessage(_)'>getFailMessage( )</a>
    <li class='indexItem indexItem2'><a href='#getName(_)'>getName( )</a>
    <li class='indexItem indexItem2'><a href='#getUrl(_)'>getUrl( )</a>
    <li class='indexItem indexItem2'><a href='#getVersion(_)'>getVersion( )</a>
    <li class='indexItem indexItem2'><a href='#log(%24type%2C_%40msgs)'>log($type, @msgs)</a>
    <li class='indexItem indexItem2'><a href='#loggedCommand(%24cmd%2C_%24timeout)'>loggedCommand($cmd, $timeout)</a>
    <li class='indexItem indexItem2'><a href='#print(%24verbose)'>print($verbose)</a>
    <li class='indexItem indexItem2'><a href='#processArgv(%40ARGV)'>processArgv(@ARGV)</a>
    <li class='indexItem indexItem2'><a href='#report(%24verbose)'>report($verbose)</a>
    <li class='indexItem indexItem2'><a href='#reportBody(_)'>reportBody( )</a>
    <li class='indexItem indexItem2'><a href='#setBody(%24body)'>setBody($body)</a>
    <li class='indexItem indexItem2'><a href='#setCompleted(%24completed)'>setCompleted($completed)</a>
    <li class='indexItem indexItem2'><a href='#setDescription(%24description)'>setDescription($description)</a>
    <li class='indexItem indexItem2'><a href='#setFailMessage(%24msg)'>setFailMessage($msg)</a>
    <li class='indexItem indexItem2'><a href='#setName(%24name)'>setName($name)</a>
    <li class='indexItem indexItem2'><a href='#setResult(%24completed%2C_%24msg)'>setResult($completed, $msg)</a>
    <li class='indexItem indexItem2'><a href='#setUrl(%24url)'>setUrl($url)</a>
    <li class='indexItem indexItem2'><a href='#setVersion(%24version)'>setVersion($version)</a>
    <li class='indexItem indexItem2'><a href='#tempFile(%40paths)'>tempFile(@paths)</a>
    <li class='indexItem indexItem2'><a href='#xmlElement(%24name%2C_%24escape%2C_%40contents)'>xmlElement($name, $escape, @contents)</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#EXAMPLE'>EXAMPLE</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Inca::Reporter - Module for creating Inca reporters</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use Inca::Reporter;
  my $reporter = new Inca::Reporter(
    name =&#62; &#39;hack.version&#39;,
    version =&#62; 0.1,
    description =&#62; &#39;A really helpful reporter description&#39;,
    url =&#62; &#39;http://url.to.more.reporter.info&#39;
  );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module creates Inca reporters--objects that produce XML that follows the Inca Report schema. The constructor may be called with a number of reporter attributes that can later be set and queried with their corresponding get/set functions (described below). For example,</p>

<pre>  my $reporter = new Inca::Reporter();
  $reporter-&#62;setUrl(&#39;http://url.to.more.reporter.info&#39;);
  $reporter-&#62;setVersion(0.1);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CLASS_METHODS"
>CLASS METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new(%attributes)"
>new(%attributes)</a></h2>

<p>Class constructor that returns a new Inca::Reporter object. The constructor may be called with any of the following named attributes as parameters.</p>

<dl>
<dt><a name="body"
>body</a></dt>

<dd>
<p>the XML body of the report. See the Inca Report schema for format.</p>

<dt><a name="completed"
>completed</a></dt>

<dd>
<p>boolean (0 or 1) indicating whether or not the reporter has completed generating the information it is intended to produce</p>

<dt><a name="description"
>description</a></dt>

<dd>
<p>a verbose description of the reporter</p>

<dt><a name="fail_message"
>fail_message</a></dt>

<dd>
<p>a message describing why the reporter failed to complete its task</p>

<dt><a name="name"
>name</a></dt>

<dd>
<p>the name that identifies this reporter</p>

<dt><a name="url"
>url</a></dt>

<dd>
<p>URL to get more information about the reporter</p>

<dt><a name="version"
>version</a></dt>

<dd>
<p>the version of the reporter; defaults to 0</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="addArg($name,_$description,_$default,_$pattern)"
>addArg($name, $description, $default, $pattern)</a></h2>

<p>Adds an command line argument (invocation syntax -name=value) to the reporter. If supplied, the optional $description will be included in the reporter help XML and display. If supplied, $default indicates that the argument is optional; the argValue method will return $default if the command line does not include a value for the argument. The optional $pattern specifies a pattern for recognizing valid argument values; the default is &#39;.*&#39;, which means that any text is acceptable for the argument value.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="addDependency($dependency_[,_...])"
>addDependency($dependency [, ...])</a></h2>

<p>Add one or more dependencies to the list of modules on which this reporter depends. Dependencies are reported as part of reporter help output to assist reporter repository tools in their retrievals. NOTE: dependencies on the standard Inca reporter library modules are added by the modules themselves, so a reporter only needs to invoke this method to report external dependencies. The Inca Reporter Instance Manager presently only supports dependencies on Inca repository packages, not packages from, e.g., CPAN.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="argValue($name,_$position)"
>argValue($name, $position)</a></h2>

<p>Called after the processArgv method, this returns the value of the position&#39;th instance (starting with 1) of the $name command-line argument. Returns the value of the last instance if position is not supplied. Returns undef if $name is not a recognized argument. Returns the default value for $name if it has one and $name is included fewer than $position times on the command line.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="argValues($name)"
>argValues($name)</a></h2>

<p>Called after the processArgv method, this returns an array of all values specified for the $name command-line argument. Returns undef if $name is not a recognized argument. Returns a single-element array containing the default value for $name if it has one and $name does not appear on the command line.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="compiledProgramOutput(%params)"
>compiledProgramOutput(%params)</a></h2>

<p>A convenience; compiles and runs a program and returns its combined stderr/out output as a string after removing the source and exec files. Recognized params:</p>

<dl>
<dt><a name="code"
>code</a></dt>

<dd>
<p>the code to compile; required</p>

<dt><a name="compiler"
>compiler</a></dt>

<dd>
<p>the compiler to invoke; defaults to cc</p>

<dt><a name="language"
>language</a></dt>

<dd>
<p>source file language--one of &#39;c&#39;, &#39;c++&#39;, &#39;fortran&#39;, or &#39;java&#39;; defaults to &#39;c&#39;.</p>

<dt><a name="out_switch"
>out_switch</a></dt>

<dd>
<p>the switch to use to specify the compiler output file; defaults to &#39;-o &#39;</p>

<dt><a name="switches"
>switches</a></dt>

<dd>
<p>additional switches to pass to the compiler; defaults to &#39;&#39;</p>

<dt><a name="timeout"
>timeout</a></dt>

<dd>
<p>max seconds compilation/execution may take; returns undef on time-out</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="failPrintAndExit($msg)"
>failPrintAndExit($msg)</a></h2>

<p>A convenience; calls setResult(0, $msg) and print( ) before exiting the reporter.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getBody(_)"
>getBody( )</a></h2>

<p>Returns the body of the report.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getCompleted(_)"
>getCompleted( )</a></h2>

<p>Returns the completion indicator of the reporter.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getDescription(_)"
>getDescription( )</a></h2>

<p>Returns the description of the reporter.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getFailMessage(_)"
>getFailMessage( )</a></h2>

<p>Returns the failure message of the reporter.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getName(_)"
>getName( )</a></h2>

<p>Returns the name that identifies this reporter.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getUrl(_)"
>getUrl( )</a></h2>

<p>Returns the url which describes the reporter in more detail.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getVersion(_)"
>getVersion( )</a></h2>

<p>Returns the version of the reporter.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="log($type,_@msgs)"
>log($type, @msgs)</a></h2>

<p>Appends each element of @msgs to the list of $type log messages stored in the reporter. $type must be one of &#39;debug&#39;, &#39;error&#39;, &#39;info&#39;, &#39;system&#39;, or &#39;warn&#39;.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="loggedCommand($cmd,_$timeout)"
>loggedCommand($cmd, $timeout)</a></h2>

<p>A convenience; appends $cmd to the &#39;system&#39;-type log messages stored in the reporter, then runs $cmd and returns its output. If $timeout is specified, aborts the execution of $cmd and returns undef if it doesn&#39;t complete within $timeout seconds.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="print($verbose)"
>print($verbose)</a></h2>

<p>A convenience; prints report($verbose) to stdout.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="processArgv(@ARGV)"
>processArgv(@ARGV)</a></h2>

<p>Processes @ARGV which is a list of command-line arguments of the form:</p>

<p>-name1=value1 -name2=value2 ...</p>

<p>The following options are predefined:</p>

<dl>
<dt><a name="help"
>help</a></dt>

<dd>
<dl>
<dt><a name="yes"
>yes</a></dt>

<dd>
<p>Prints help information describing the reporter inputs, then forces the reporter to exit. If the verbose level is 0, the output will be text; otherwise, it will be Inca Report XML.</p>

<dt><a name="no_(default)"
>no (default)</a></dt>

<dd>
<p>Normal reporter execution.</p>
</dd>
</dl>

<dt><a name="log"
>log</a></dt>

<dd>
<dl>
<dt><a name="0"
>0</a></dt>

<dd>
<p>log no messages (default)</p>

<dt><a name="1"
>1</a></dt>

<dd>
<p>log error messages</p>

<dt><a name="2"
>2</a></dt>

<dd>
<p>log error and warning messages</p>

<dt><a name="3"
>3</a></dt>

<dd>
<p>log error, warning, and system messages</p>

<dt><a name="4"
>4</a></dt>

<dd>
<p>log error, warning, system, and info messages</p>

<dt><a name="5"
>5</a></dt>

<dd>
<p>log error, warning, system, info, and debug messages</p>

<dt><a name="debug"
>debug</a></dt>

<dd>
<p>log only debug messages</p>

<dt><a name="error"
>error</a></dt>

<dd>
<p>log only error messages</p>

<dt><a name="info"
>info</a></dt>

<dd>
<p>log only info messages</p>

<dt><a name="system"
>system</a></dt>

<dd>
<p>log only system messages</p>

<dt><a name="warn"
>warn</a></dt>

<dd>
<p>log only warning messages</p>
</dd>
</dl>

<dt><a name="verbose"
>verbose</a></dt>

<dd>
<dl>
<dt><a name="0"
>0</a></dt>

<dd>
<p>print will only produce &#34;completed&#34; or &#34;failed&#34;.</p>

<dt><a name="1_(default)"
>1 (default)</a></dt>

<dd>
<p>print will produce Inca Report XML.</p>

<dt><a name="2"
>2</a></dt>

<dd>
<p>print will produce Inca Report XML that includes help information.</p>
</dd>
</dl>

<dt><a name="version"
>version</a></dt>

<dd>
<dl>
<dt><a name="yes"
>yes</a></dt>

<dd>
<p>Prints the reporter version number and exits.</p>

<dt><a name="no_(default)"
>no (default)</a></dt>

<dd>
<p>Normal reporter execution.</p>
</dd>
</dl>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="report($verbose)"
>report($verbose)</a></h2>

<p>Returns report text or XML, depending on the value (0, 1, 2) of $verbose. Uses the value of the -verbose switch if $verbose is undef.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="reportBody(_)"
>reportBody( )</a></h2>

<p>Constructs and returns the XML contents of the report body. Child classes should override the default implementation, which returns undef.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setBody($body)"
>setBody($body)</a></h2>

<p>Sets the body of the report to $body.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setCompleted($completed)"
>setCompleted($completed)</a></h2>

<p>Sets the completion indicator of the reporter to the boolean $completed.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setDescription($description)"
>setDescription($description)</a></h2>

<p>Sets the description of the reporter to $description.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setFailMessage($msg)"
>setFailMessage($msg)</a></h2>

<p>Sets the failure message of the reporter to $msg.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setName($name)"
>setName($name)</a></h2>

<p>Sets the name that identifies this reporter.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setResult($completed,_$msg)"
>setResult($completed, $msg)</a></h2>

<p>A convenience; calls setCompleted($completed) and setFailMessage($msg).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setUrl($url)"
>setUrl($url)</a></h2>

<p>Sets the url for the reporter to $url.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setVersion($version)"
>setVersion($version)</a></h2>

<p>Sets the version of the reporter to $version. Recognizes and parses CVS revision strings.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="tempFile(@paths)"
>tempFile(@paths)</a></h2>

<p>A convenience. Adds each element of @paths to a list of temporary files that will be deleted automatically when the reporter is destroyed.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="xmlElement($name,_$escape,_@contents)"
>xmlElement($name, $escape, @contents)</a></h2>

<p>Returns the XML element $name surrounding @contents. $escape should be true only for leaf elements; in this case, the each special XML character (&#60;&#62;&#38;) in @contents is replaced by the equivalent XML entity.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLE"
>EXAMPLE</a></h1>

<pre>  use strict;
  use warnings;
  use Inca::Reporter;
  my $reporter = new Inca::Reporter(
    name =&#62; &#39;selfPathReporter&#39;,
    version =&#62; &#39;1.0.0&#39;,
    description =&#62; &#39;Reports the path to the reporter&#39;,
    url =&#62; &#39;http://mothership.ufo.edu&#39;
  );
  $reporter-&#62;processArgv(@ARGV);
  $reporter-&#62;setBody($reporter-&#62;xmlElement(&#39;path&#39;, 1, $0));
  $reporter-&#62;print();</pre>

<p>Running this reporter with -verbose=1 will produce output that looks something like this.</p>

<pre>  &#60;?xml version=&#39;1.0&#39;?&#62;
  &#60;rep:report xmlns:rep=&#39;http://inca.sdsc.edu/dataModel/report_2.1&#39;&#62;
    &#60;gmt&#62;Tue Jan  7 07:55:44 2005&#60;/gmt&#62;
    &#60;hostname&#62;blue.ufo.edu&#60;/hostname&#62;
    &#60;name&#62;selfPathReporter&#60;/name&#62;
    &#60;version&#62;1.0.0&#60;/version&#62;
    &#60;workingDir&#62;/home/inca&#60;/workingDir&#62;
    &#60;reporterPath&#62;reporters/bin/selfPathReporter&#60;/reporterPath&#62;
    &#60;args&#62;
      &#60;arg&#62;
        &#60;name&#62;help&#60;/name&#62;
        &#60;value&#62;no&#60;/value&#62;
      &#60;/arg&#62;
      &#60;arg&#62;
        &#60;name&#62;log&#60;/name&#62;
        &#60;value&#62;&#60;/value&#62;
      &#60;/arg&#62;
      &#60;arg&#62;
        &#60;name&#62;verbose&#60;/name&#62;
        &#60;value&#62;1&#60;/value&#62;
      &#60;/arg&#62;
      &#60;arg&#62;
        &#60;name&#62;version&#60;/name&#62;
        &#60;value&#62;no&#60;/value&#62;
      &#60;/arg&#62;
    &#60;/args&#62;
    &#60;body&#62;
      &#60;path&#62;sr&#60;/body&#62;
    &#60;/body&#62;
    &#60;exitStatus&#62;
      &#60;completed&#62;true&#60;/completed&#62;
    &#60;/exitStatus&#62;
  &#60;/rep:report&#62;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Shava Smallen &#60;ssmallen@sdsc.edu&#62;</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
