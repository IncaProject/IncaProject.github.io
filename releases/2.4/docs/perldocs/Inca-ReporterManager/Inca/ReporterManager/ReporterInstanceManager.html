<html><head><title>Inca::ReporterManager::ReporterInstanceManager</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="black with blue on white" type="text/css" href="../../_black_with_blue_on_white.css" media="all" >
<link rel="alternate stylesheet" title="black with magenta on white" type="text/css" href="../../_black_with_magenta_on_white.css" media="all" >
<link rel="alternate stylesheet" title="black with cyan on white" type="text/css" href="../../_black_with_cyan_on_white.css" media="all" >
<link rel="alternate stylesheet" title="white with purple on black" type="text/css" href="../../_white_with_purple_on_black.css" media="all" >
<link rel="alternate stylesheet" title="white with navy blue on black" type="text/css" href="../../_white_with_navy_blue_on_black.css" media="all" >
<link rel="alternate stylesheet" title="grey with green on black" type="text/css" href="../../_grey_with_green_on_black.css" media="all" >
<link rel="alternate stylesheet" title="white with green on grey" type="text/css" href="../../_white_with_green_on_grey.css" media="all" >
<link rel="alternate stylesheet" title="black with green on grey" type="text/css" href="../../_black_with_green_on_grey.css" media="all" >
<link rel="alternate stylesheet" title="grey with green on white" type="text/css" href="../../_grey_with_green_on_white.css" media="all" >
<link rel="alternate stylesheet" title="indexless black with blue on white" type="text/css" href="../../_indexless_black_with_blue_on_white.css" media="all" >
<link rel="alternate stylesheet" title="indexless white with purple on black" type="text/css" href="../../_indexless_white_with_purple_on_black.css" media="all" >
<link rel="alternate stylesheet" title="indexless white with green on grey" type="text/css" href="../../_indexless_white_with_green_on_grey.css" media="all" >
<link rel="alternate stylesheet" title="indexless grey with green on white" type="text/css" href="../../_indexless_grey_with_green_on_white.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.008005 at Thu Jul  3 20:07:03 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CLASS_METHODS'>CLASS METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new(_%25Options_)'>new( %Options )</a>
    <li class='indexItem indexItem2'><a href='#getAgent(_)'>getAgent( )</a>
    <li class='indexItem indexItem2'><a href='#getCheckPeriod(_)'>getCheckPeriod( )</a>
    <li class='indexItem indexItem2'><a href='#getCredentials(_)'>getCredentials( )</a>
    <li class='indexItem indexItem2'><a href='#getDepots(_)'>getDepots( )</a>
    <li class='indexItem indexItem2'><a href='#getDepotTimeout(_)'>getDepotTimeout( )</a>
    <li class='indexItem indexItem2'><a href='#getId(_)'>getId( )</a>
    <li class='indexItem indexItem2'><a href='#getReporterCache(_)'>getReporterCache( )</a>
    <li class='indexItem indexItem2'><a href='#getSeriesConfig(_)'>getSeriesConfig( )</a>
    <li class='indexItem indexItem2'><a href='#getTmpDirectory(_)'>getTmpDirectory( )</a>
    <li class='indexItem indexItem2'><a href='#hasAgent(_)'>hasAgent( )</a>
    <li class='indexItem indexItem2'><a href='#hasCredentials(_)'>hasCredentials( )</a>
    <li class='indexItem indexItem2'><a href='#hasSeriesConfig(_)'>hasSeriesConfig( )</a>
    <li class='indexItem indexItem2'><a href='#runReporter(_)'>runReporter( )</a>
    <li class='indexItem indexItem2'><a href='#setAgent(_%24uri_)'>setAgent( $uri )</a>
    <li class='indexItem indexItem2'><a href='#setCheckPeriod(_%24secs_)'>setCheckPeriod( $secs )</a>
    <li class='indexItem indexItem2'><a href='#setCredentials(_%5C%25credentials_)'>setCredentials( \%credentials )</a>
    <li class='indexItem indexItem2'><a href='#setDepots(_%40depot_uris_)'>setDepots( @depot_uris )</a>
    <li class='indexItem indexItem2'><a href='#setDepotTimeout(_%24secs_)'>setDepotTimeout( $secs )</a>
    <li class='indexItem indexItem2'><a href='#setId(_%24resourceId_)'>setId( $resourceId )</a>
    <li class='indexItem indexItem2'><a href='#setReporterCache(_%24reporter_cache_)'>setReporterCache( $reporter_cache )</a>
    <li class='indexItem indexItem2'><a href='#setSeriesConfig(_%24config_)'>setSeriesConfig( $config )</a>
    <li class='indexItem indexItem2'><a href='#setTmpDirectory(_%24path_)'>setTmpDirectory( $path )</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#CAVEATS%2FWARNINGS'>CAVEATS/WARNINGS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Inca::ReporterManager::ReporterInstanceManager - Manages reporter execution</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use Inca::ReporterManager::ReporterInstanceManager;
  my $rim = new Inca::ReporterManager::ReporterInstanceManager();
  my $sc = new Inca::Config::Suite::SeriesConfig();
  $sc-&#62;setPath( &#34;var/reporter-packages/bin/cluster.compiler.gcc.version-3&#34; );
  $sc-&#62;setName( &#34;cluster.compiler.gcc.version&#34; );
  $sc-&#62;setVersion( &#34;3&#34; );
  $sc-&#62;setContext( &#34;cluster.compiler.gcc.version -verbose=1 -log=3&#34; );
  my $credentials = { cert =&#62; &#34;t/certs/client_ca1cert.pem&#34;,
                      key =&#62; &#34;t/certs/client_ca1keynoenc.pem&#34;, 
                      passphrase =&#62; undef,
                      trusted =&#62; &#34;t/certs/trusted&#34; };
  $rim = new Inca::ReporterManager::ReporterInstanceManager();
  $rim-&#62;setSeriesConfig( $sc );
  $rim-&#62;setId( &#34;resourceA&#34; );
  $rim-&#62;setCredentials( $credentials );
  $rim-&#62;setCheckPeriod(1);
  $rim-&#62;setPath( &#34;t/stream_report&#34; );
  $rim-&#62;setDepots( &#34;incas://localhost:$port&#34; );
  $rim-&#62;setReporterCache( $rc );
  my $success = $rim-&#62;runReporter();</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The Reporter Instance Manager (RIM) is responsible for launching a reporter instance and monitoring its execution. Specifically, it forks/execs the reporter and then monitors its system usage (CPU time, wall clock time, and memory) and if it exceeds a specified limit set for either wall clock time, CPU time, or memory, it will kill the reporter and formulate an error report. Otherwise upon reporter exit, the RIM will gather stderr, stdout, and usage statistics and send that to the first depot in its depot list. The depot will then get passed to all interested parties.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CLASS_METHODS"
>CLASS METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new(_%Options_)"
>new( %Options )</a></h2>

<p>Class constructor which returns a new Inca::ReporterManager::ReporterInstanceManager object. The constructor may be called with any of the following attributes.</p>

<blockquote>
<p><b>Options</b>:</p>

<dl>
<dt><a name="id"
>id</a></dt>

<dd>
<p>The resource identifier supplied by the reporter agent that the reporter manager will use to identify itself to the reporter depot.</p>

<dt><a name="config"
>config</a></dt>

<dd>
<p>An object of type Inca::Config::Suite::SeriesConfig which contains information about the reporter to execute.</p>

<dt><a name="checkPeriod"
>checkPeriod</a></dt>

<dd>
<p>A positive integer indicating the period in seconds of which to check the reporter for exceeding resource limits [default: 5]</p>

<dt><a name="depotTimeout"
>depotTimeout</a></dt>

<dd>
<p>A positive integer indicating the period in seconds of which to time out the connection to the depot [default: 120]</p>

<dt><a name="depotURIs"
>depotURIs</a></dt>

<dd>
<p>A list of depot uris. The report will be sent to the first depot in the list. If the first depot is unreachable, the next depots in the list will be tried.</p>

<dt><a name="reporterCache"
>reporterCache</a></dt>

<dd>
<p>An object of type Inca::ReporterManager::ReporterCache which is used to map reporter uris to a local path.</p>

<dt><a name="credentials"
>credentials</a></dt>

<dd>
<p>A reference to a hash array containing the credential information.</p>

<dt><a name="tmpDir"
>tmpDir</a></dt>

<dd>
<p>A string containing a path to a temporary file space that Inca can use while executing reporters</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getAgent(_)"
>getAgent( )</a></h2>

<p>Retrieve the uri of the Inca agent to contact in order to retrive a proxy credential to use for the reporter.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A string containing the uri of the Inca agent to contact to retrieve a proxy credential.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getCheckPeriod(_)"
>getCheckPeriod( )</a></h2>

<p>Get the period for how often to check the reporter for exceeding its limits.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A positive integer indicating the period in seconds of which to check for resource limits.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getCredentials(_)"
>getCredentials( )</a></h2>

<p>Retrieve the security credentials.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A reference to a hash array containing the paths to the security credentials.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getDepots(_)"
>getDepots( )</a></h2>

<p>Retrieve the destination depots that are used to send the report on completion.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>An array of strings containing uris to depots [host:port, ...]</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getDepotTimeout(_)"
>getDepotTimeout( )</a></h2>

<p>Get the period in seconds of which to time out the connection to the depot</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A positive integer indicating the period in seconds of which to time out thec connection to the depot</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getId(_)"
>getId( )</a></h2>

<p>Get the resource identifier supplied by the reporter agent that the reporter manager will use to identify itself to the depot.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A string indicating the id of the resource.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getReporterCache(_)"
>getReporterCache( )</a></h2>

<p>Retrieve the reporter administrator to use in order to find a path to a local copy of a reporter (from its URI).</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>An object of type Inca::ReporterManager::ReporterCache which is used to map reporter uris to a local path.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getSeriesConfig(_)"
>getSeriesConfig( )</a></h2>

<p>Retrieve the series config that will be executed.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>An object of type Inca::Config::Suite::SeriesConfig which contains information about the reporter to execute.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getTmpDirectory(_)"
>getTmpDirectory( )</a></h2>

<p>Retrieve the path to a temporary file space that Inca can use while executing reporters</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A string containing a path to a temporary file space.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="hasAgent(_)"
>hasAgent( )</a></h2>

<p>Returns true if an agent uri has been specified and false otherwise.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>True if an agent uri has been specified and false otherwise.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="hasCredentials(_)"
>hasCredentials( )</a></h2>

<p>Return true if credentials have been specified; otherwise return false.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A boolean indicating true if credentials have been specified and false if they has not.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="hasSeriesConfig(_)"
>hasSeriesConfig( )</a></h2>

<p>Return true if a series config has been specified; otherwise return false.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>Returns true if a series config has been specified and false if it has not.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="runReporter(_)"
>runReporter( )</a></h2>

<p>Contact the reporter administrator, retrieve the local path to the reporter, and execute it.</p>

<p><b>Returns:</b></p>

<p>Returns false if there was a problem either retrieving the reporter, running it, or sending it to the depot. Otherwise returns true for success.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setAgent(_$uri_)"
>setAgent( $uri )</a></h2>

<p>Set the uri of the Inca agent to contact in order to retrive a proxy credential to use for the reporter.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="uri"
>uri</a></dt>

<dd>
<p>A string containing the uri of the Inca agent to contact to retrieve a proxy credential.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setCheckPeriod(_$secs_)"
>setCheckPeriod( $secs )</a></h2>

<p>Set the period for how often to check the reporter for exceeding its limits.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="secs"
>secs</a></dt>

<dd>
<p>A positive integer indicating the period in seconds of which to check for resource limits.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setCredentials(_\%credentials_)"
>setCredentials( \%credentials )</a></h2>

<p>Specify the credentials to use.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="credentials"
>credentials</a></dt>

<dd>
<p>A reference to a hash array containing the credential information.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setDepots(_@depot_uris_)"
>setDepots( @depot_uris )</a></h2>

<p>Specify the destination depots that are used to send the report on completion. The report will be sent to the first depot in the list. If the first depot is unreachable, the next depots in the list will be tried.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="depot_uris"
>depot_uris</a></dt>

<dd>
<p>Any number of strings containing a uri to a depot [host:port, ...]</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setDepotTimeout(_$secs_)"
>setDepotTimeout( $secs )</a></h2>

<p>Set the period for when the time has exceeded for sending the report to the depot.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="secs"
>secs</a></dt>

<dd>
<p>A positive integer indicating the period in seconds of which to time out the connection to the depot.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setId(_$resourceId_)"
>setId( $resourceId )</a></h2>

<p>Set the resource identifier supplied by the reporter agent that the reporter manager will use to identify itself to the depot.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="resourceId"
>resourceId</a></dt>

<dd>
<p>A string indicating the id of the resource.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setReporterCache(_$reporter_cache_)"
>setReporterCache( $reporter_cache )</a></h2>

<p>Specify the reporter administrator to use in order to find a path to a local copy of a reporter (from its URI).</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="reporter_cache"
>reporter_cache</a></dt>

<dd>
<p>An object of type Inca::ReporterManager::ReporterCache which is used to map reporter uris to a local path.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setSeriesConfig(_$config_)"
>setSeriesConfig( $config )</a></h2>

<p>Set the series config to be executed.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="config"
>config</a></dt>

<dd>
<p>An object of type Inca::Config::Suite::SeriesConfig which contains information about the reporter to execute.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setTmpDirectory(_$path_)"
>setTmpDirectory( $path )</a></h2>

<p>Specify a temporary file space that Inca can use while executing reporters.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="path"
>path</a></dt>

<dd>
<p>A string containing a path to a temporary file space</p>
</dd>
</dl>
</blockquote>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Shava Smallen &#60;ssmallen@sdsc.edu&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAVEATS/WARNINGS"
>CAVEATS/WARNINGS</a></h1>

<p>None so far.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
