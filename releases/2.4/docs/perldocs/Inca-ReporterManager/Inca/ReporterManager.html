<html><head><title>Inca::ReporterManager</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="black with blue on white" type="text/css" href="../_black_with_blue_on_white.css" media="all" >
<link rel="alternate stylesheet" title="black with magenta on white" type="text/css" href="../_black_with_magenta_on_white.css" media="all" >
<link rel="alternate stylesheet" title="black with cyan on white" type="text/css" href="../_black_with_cyan_on_white.css" media="all" >
<link rel="alternate stylesheet" title="white with purple on black" type="text/css" href="../_white_with_purple_on_black.css" media="all" >
<link rel="alternate stylesheet" title="white with navy blue on black" type="text/css" href="../_white_with_navy_blue_on_black.css" media="all" >
<link rel="alternate stylesheet" title="grey with green on black" type="text/css" href="../_grey_with_green_on_black.css" media="all" >
<link rel="alternate stylesheet" title="white with green on grey" type="text/css" href="../_white_with_green_on_grey.css" media="all" >
<link rel="alternate stylesheet" title="black with green on grey" type="text/css" href="../_black_with_green_on_grey.css" media="all" >
<link rel="alternate stylesheet" title="grey with green on white" type="text/css" href="../_grey_with_green_on_white.css" media="all" >
<link rel="alternate stylesheet" title="indexless black with blue on white" type="text/css" href="../_indexless_black_with_blue_on_white.css" media="all" >
<link rel="alternate stylesheet" title="indexless white with purple on black" type="text/css" href="../_indexless_white_with_purple_on_black.css" media="all" >
<link rel="alternate stylesheet" title="indexless white with green on grey" type="text/css" href="../_indexless_white_with_green_on_grey.css" media="all" >
<link rel="alternate stylesheet" title="indexless grey with green on white" type="text/css" href="../_indexless_grey_with_green_on_white.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.008005 at Thu Jul  3 20:07:03 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CLASS_METHODS'>CLASS METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new(_%25Options_)'>new( %Options )</a>
    <li class='indexItem indexItem2'><a href='#dispatch(_%24suite_)'>dispatch( $suite )</a>
    <li class='indexItem indexItem2'><a href='#getCheckPeriod(_)'>getCheckPeriod( )</a>
    <li class='indexItem indexItem2'><a href='#getCredentials(_)'>getCredentials( )</a>
    <li class='indexItem indexItem2'><a href='#getDepots(_)'>getDepots( )</a>
    <li class='indexItem indexItem2'><a href='#getDepotTimeout(_)'>getDepotTimeout( )</a>
    <li class='indexItem indexItem2'><a href='#getId(_)'>getId( )</a>
    <li class='indexItem indexItem2'><a href='#getReporterCache(_)'>getReporterCache( )</a>
    <li class='indexItem indexItem2'><a href='#getRimPath(_)'>getRimPath( )</a>
    <li class='indexItem indexItem2'><a href='#getTmpDirectory(_)'>getTmpDirectory( )</a>
    <li class='indexItem indexItem2'><a href='#hasScheduler(_%24scheduler_)'>hasScheduler( $scheduler )</a>
    <li class='indexItem indexItem2'><a href='#hasTmpDirectory(_)'>hasTmpDirectory( )</a>
    <li class='indexItem indexItem2'><a href='#setCheckPeriod(_%24secs_)'>setCheckPeriod( $secs )</a>
    <li class='indexItem indexItem2'><a href='#setCredentials(_%5C%25credentials_)'>setCredentials( \%credentials )</a>
    <li class='indexItem indexItem2'><a href='#setDepots(_%40depot_uris_)'>setDepots( @depot_uris )</a>
    <li class='indexItem indexItem2'><a href='#setDepotTimeout(_%24secs_)'>setDepotTimeout( $secs )</a>
    <li class='indexItem indexItem2'><a href='#setId(_%24resourceId_)'>setId( $resourceId )</a>
    <li class='indexItem indexItem2'><a href='#setLogger(_)'>setLogger( )</a>
    <li class='indexItem indexItem2'><a href='#setReporterCache(_%24reporter_cache_)'>setReporterCache( $reporter_cache )</a>
    <li class='indexItem indexItem2'><a href='#setRimPath(_%24path_)'>setRimPath( $path )</a>
    <li class='indexItem indexItem2'><a href='#setTmpDirectory(_%24path_)'>setTmpDirectory( $path )</a>
    <li class='indexItem indexItem2'><a href='#start(_)'>start( )</a>
    <li class='indexItem indexItem2'><a href='#stop(_)'>stop( )</a>
    <li class='indexItem indexItem2'><a href='#storePackage(_%24name%2C_%24filename%2C_%24version%2C_%24installpath%2C_%24dependencies%2C_%24tmpfilename_)'>storePackage( $name, $filename, $version, $installpath, $dependencies, $tmpfilename )</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#CAVEATS%2FWARNINGS'>CAVEATS/WARNINGS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Inca::ReporterManager - Executes an Inca reporter suite</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use Inca::ReporterManager;
  use Inca::Config::Suite;
  use Inca::ReporterManager::ReporterCache;
  my $suite = new Inca::Config::Suite();
  $suite-&#62;read( &#34;suite.xml&#34; );
  my $scheduler = new Inca::ReporterManager();
  my $credentials = { cert =&#62; &#34;t/certs/client_ca1cert.pem&#34;,
                      key =&#62; &#34;t/certs/client_ca1keynoenc.pem&#34;,
                      passphrase =&#62; undef,
                      trusted =&#62; &#34;t/certs/trusted&#34; };
  $scheduler-&#62;setCredentials( $credentials );
  $scheduler-&#62;setCheckPeriod( 1 );
  $scheduelr-&#62;setDepots( &#34;incas://localhost:$port&#34; );
  my $rc = new Inca::ReporterManager::ReporterCache( &#34;t&#34; );
  $scheduler-&#62;setReporterCache( $rc );
  $scheduler-&#62;dispatch( $suite );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module implements the core functionality of the reporter manager. It receives requests from either a reporter agent or a local Inca administrator via its APIs indicating add/delete of a series config or store a package (e.g., a reporter, reporter library, or external dependency).</p>

<p>Each add/delete series config request indicates a reporter name and version, a set of input arguments, limits, frequency of execution, execution priority, a scheduler, and a storage policy (for now, a set of depots interested in the results). For example, if the reporter execution is on-demand, the scheduler hands the request to the Sequential scheduler. In many cases, the Cron scheduler will be requested, that is the reporter execution is scheduled and the frequency of execution is managed by an internal cron table. When the scheduled time for a reporter comes, a RIM is launched to run the reporter.</p>

<p>Each store package request is handled a bit differently based on the filename. See <a href="../Inca/ReporterManager/ReporterCache.html" class="podlinkpod"
>Inca::ReporterManager::ReporterCache</a> for more information.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CLASS_METHODS"
>CLASS METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new(_%Options_)"
>new( %Options )</a></h2>

<p>Class constructor which returns a new Inca::ReporterManager object. The constructor may be called with any of the following attributes.</p>

<blockquote>
<p><b>Options</b>:</p>

<dl>
<dt><a name="checkPeriod"
>checkPeriod</a></dt>

<dd>
<p>A positive integer indicating the period in seconds of which to check the reporter for exceeding resource limits [default: 2]</p>

<dt><a name="credentials"
>credentials</a></dt>

<dd>
<p>A reference to a hash array containing the credential information.</p>

<dt><a name="depotURIs"
>depotURIs</a></dt>

<dd>
<p>A list of depot uris. The report will be sent to the first depot in the list. If the first depot is unreachable, the next depots in the list will be tried.</p>

<dt><a name="reporterCache"
>reporterCache</a></dt>

<dd>
<p>An object of type Inca::ReporterManager::ReporterCache which is used to map reporters to a local path.</p>

<dt><a name="rimPath"
>rimPath</a></dt>

<dd>
<p>A string containing the path to the reporter-instance-manager executable.</p>

<dt><a name="tmpDir"
>tmpDir</a></dt>

<dd>
<p>A string containing a path to a temporary file space that Inca can use while executing reporters</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="dispatch(_$suite_)"
>dispatch( $suite )</a></h2>

<p>Read add/delete reporter requests in suite and route to appropriate scheduler.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="suite"
>suite</a></dt>

<dd>
<p>An object of type Inca::Config::Suite containing add/delete series config requests</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getCheckPeriod(_)"
>getCheckPeriod( )</a></h2>

<p>Get the period for how often to check the reporter for exceeding its limits.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A positive integer indicating the period in seconds of which to check for resource limits.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getCredentials(_)"
>getCredentials( )</a></h2>

<p>Retrieve the security credentials.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A reference to a hash array containing the paths to the security credentials.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getDepots(_)"
>getDepots( )</a></h2>

<p>Retrieve the destination depots that are used to send the report on completion.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>An array of strings containing uris to depots [host:port, ...]</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getDepotTimeout(_)"
>getDepotTimeout( )</a></h2>

<p>Get the period in seconds of which to time out the connection to the depot</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A positive integer indicating the period in seconds of which to time out thec connection to the depot</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getId(_)"
>getId( )</a></h2>

<p>Get the resource identifier supplied by the reporter agent that the reporter manager will use to identify itself to the depot.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A string indicating the id of the resource.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getReporterCache(_)"
>getReporterCache( )</a></h2>

<p>Retrieve the reporter administrator to use in order to find a path to a local copy of a reporter (from its URI).</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>An object of type Inca::ReporterManager::ReporterCache which is used to map reporters to a local path.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getRimPath(_)"
>getRimPath( )</a></h2>

<p>Retrieve the path to the reporter-instance-manager script.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A string containing the path to the reporter-instance-manager script.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getTmpDirectory(_)"
>getTmpDirectory( )</a></h2>

<p>Retrieve the path to a temporary file space that Inca can use while executing reporters</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A string containing a path to a temporary file space.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="hasScheduler(_$scheduler_)"
>hasScheduler( $scheduler )</a></h2>

<p>Return true if the reporter manager is currently running the provided scheduler.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A boolean indicating whether or not the reporter manager is running the provided scheduler.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="hasTmpDirectory(_)"
>hasTmpDirectory( )</a></h2>

<p>Return true if a temporary file space has been set for Inca.</p>

<blockquote>
<p><b>Returns</b>:</p>

<p>A boolean indicating true if a temporary file space has been set; otherwise returns false.</p>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setCheckPeriod(_$secs_)"
>setCheckPeriod( $secs )</a></h2>

<p>Set the period for how often to check the reporter for exceeding its limits.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="secs"
>secs</a></dt>

<dd>
<p>A positive integer indicating the period in seconds of which to check for resource limits.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setCredentials(_\%credentials_)"
>setCredentials( \%credentials )</a></h2>

<p>Specify the credentials to use.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="credentials"
>credentials</a></dt>

<dd>
<p>A reference to a hash array containing the credential information.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setDepots(_@depot_uris_)"
>setDepots( @depot_uris )</a></h2>

<p>Specify the destination depots that are used to send the report on completion. The report will be sent to the first depot in the list. If the first depot is unreachable, the next depots in the list will be tried.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="depot_uris"
>depot_uris</a></dt>

<dd>
<p>Any number of strings containing a uri to a depot [host:port, ...]</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setDepotTimeout(_$secs_)"
>setDepotTimeout( $secs )</a></h2>

<p>Set the period for when the time has exceeded for sending the report to the depot.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="secs"
>secs</a></dt>

<dd>
<p>A positive integer indicating the period in seconds of which to time out the connection to the depot.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setId(_$resourceId_)"
>setId( $resourceId )</a></h2>

<p>Set the resource identifier supplied by the reporter agent that the reporter manager will use to identify itself to the depot.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="resourceId"
>resourceId</a></dt>

<dd>
<p>A string indicating the id of the resource.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setLogger(_)"
>setLogger( )</a></h2>

<p>Set a log file for the reporter-instance-managers.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setReporterCache(_$reporter_cache_)"
>setReporterCache( $reporter_cache )</a></h2>

<p>Specify the reporter administrator to use in order to find a path to a local copy of a reporter (from its URI).</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="reporter_cache"
>reporter_cache</a></dt>

<dd>
<p>An object of type Inca::ReporterManager::ReporterCache which is used to map reporters to a local path.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setRimPath(_$path_)"
>setRimPath( $path )</a></h2>

<p>Specify the path to the reporter-instance-manager script.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="path"
>path</a></dt>

<dd>
<p>A string containing the path to the reporter-instance-manager script.</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setTmpDirectory(_$path_)"
>setTmpDirectory( $path )</a></h2>

<p>Specify a temporary file space that Inca can use while executing reporters.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="path"
>path</a></dt>

<dd>
<p>A string containing a path to a temporary file space</p>
</dd>
</dl>
</blockquote>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="start(_)"
>start( )</a></h2>

<p>Start execution of the schedulers that require specific start/stop.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="stop(_)"
>stop( )</a></h2>

<p>Stop execution of the schedulers that require specific start/stop.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="storePackage(_$name,_$filename,_$version,_$installpath,_$dependencies,_$tmpfilename_)"
>storePackage( $name, $filename, $version, $installpath, $dependencies, $tmpfilename )</a></h2>

<p>Store the specified package into the reporter cache.</p>

<blockquote>
<p><b>Arguments</b>:</p>

<dl>
<dt><a name="name"
>name</a></dt>

<dd>
<p>A string containing the name of the reporter.</p>

<dt><a name="filename"
>filename</a></dt>

<dd>
<p>A string containing the filename that the package should be stored under.</p>

<dt><a name="version"
>version</a></dt>

<dd>
<p>A string containing the version of the package.</p>

<dt><a name="installpath"
>installpath</a></dt>

<dd>
<p>A string containing the directory the package should be stored under relative to the reporter cache location.</p>

<dt><a name="perms"
>perms</a></dt>

<dd>
<p>A string of format &#34;[0-7][0-7][0-7]&#34; that can be used to set the permissions of the stored file after its written to disk. A value of undef means that no change of permissions is needed.</p>

<dt><a name="dependencies"
>dependencies</a></dt>

<dd>
<p>A string containing a whitespace delimited list of dependencies or undef if there are none.</p>

<dt><a name="tmpfilename"
>tmpfilename</a></dt>

<dd>
<p>A string containing the name of a temporary file that is storing the content of the package.</p>
</dd>
</dl>

<p><b>Returns</b>: True if the package is succesfully cached in the reporter cache and false otherwise.</p>
</blockquote>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Shava Smallen &#60;ssmallen@sdsc.edu&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAVEATS/WARNINGS"
>CAVEATS/WARNINGS</a></h1>

<p>Does not recognize storage policies yet.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
